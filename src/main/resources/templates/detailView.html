<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="fragments/common :: header(${title})">
    <meta charset="UTF-8">
    <title th:text="${title ?: '상세 정보'}">상세 정보</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- detailView 전용 CSS 링크 추가 -->
    <link rel="stylesheet" th:href="@{/css/detailView.css}">
</head>
<body>
    <!-- 네비게이션 바 (팝업용 간소화) -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top shadow-sm mb-4">
        <div class="container">
            <span class="navbar-brand mb-0 h1">
                 <i class="fas fa-info-circle me-2 text-primary"></i>
                 <span th:text="${title ?: '상세 정보'}">상세 정보</span>
             </span>
        </div>
     </nav>

    <div class="container mt-4 mb-5">
        <!-- 오류 메시지 표시 -->
        <div th:if="${error}" class="alert alert-danger" role="alert">
            <i class="fas fa-exclamation-circle me-2"></i> <span th:text="${error}">오류 발생</span>
        </div>
        
        <div class="detail-card card shadow-sm" th:unless="${error}">
            <div class="card-body">
                <!-- Volcano 상세 정보 -->
                <div th:if="${volcano != null}">
                    <h5 class="card-subtitle mb-3 text-muted"><i class="fas fa-volcano me-2"></i>화산 정보</h5>
                    <table class="table table-bordered table-hover detail-table">
                        <tbody>
                            <tr><th scope="row">ID</th><td th:text="${volcano.id ?: '-'}"></td></tr>
                            <tr><th scope="row">화산명</th><td th:text="${volcano.name ?: '-'}"></td></tr>
                            <tr><th scope="row">위치</th><td th:text="${volcano.location ?: '-'}"></td></tr>
                            <tr><th scope="row">국가</th><td th:text="${volcano.country ?: '-'}"></td></tr>
                            <tr><th scope="row">고도</th><td><span th:text="${volcano.elevation ?: '-'}"></span> <span th:if="${volcano.elevation != null}">m</span></td></tr>
                            <tr><th scope="row">VEI</th><td th:text="${volcano.vei ?: '-'}"></td></tr>
                            <tr><th scope="row">위도</th><td th:text="${volcano.latitude ?: '-'}"></td></tr>
                            <tr><th scope="row">경도</th><td th:text="${volcano.longitude ?: '-'}"></td></tr>
                             <!-- 다른 필요한 화산 정보 필드 추가 -->
                        </tbody>
                    </table>
                 </div>
                
                <!-- Earthquake 상세 정보 -->
                <div th:if="${earthquake != null}">
                    <h5 class="card-subtitle mb-3 text-muted"><i class="fas fa-seismograph me-2"></i>지진 정보</h5>
                    <table class="table table-bordered table-hover detail-table">
                         <tbody>
                            <tr><th scope="row">ID</th><td th:text="${earthquake.id ?: '-'}"></td></tr>
                            <tr><th scope="row">규모</th><td th:text="${earthquake.magnitude != null ? #numbers.formatDecimal(earthquake.magnitude, 1, 1) : '-'}"></td></tr>
                            <tr><th scope="row">위치</th><td th:text="${earthquake.location ?: '-'}"></td></tr>
                            <tr><th scope="row">발생일</th><td th:text="${earthquake.year + '/' + earthquake.month + '/' + earthquake.day}"></td></tr>
                            <tr><th scope="row">깊이</th><td><span th:text="${earthquake.depthKm != null ? #numbers.formatDecimal(earthquake.depthKm, 1, 1) : '-'}"></span> <span th:if="${earthquake.depthKm != null}">km</span></td></tr>
                            <tr><th scope="row">위도</th><td th:text="${earthquake.latitude ?: '-'}"></td></tr>
                            <tr><th scope="row">경도</th><td th:text="${earthquake.longitude ?: '-'}"></td></tr>
                            <!-- 다른 필요한 지진 정보 필드 추가 -->
                        </tbody>
                    </table>
                </div>

                <!-- Tsunami 상세 정보 (신규 추가) -->
                <div th:if="${tsunami != null}">
                     <h5 class="card-subtitle mb-3 text-muted"><i class="fas fa-water me-2"></i>쓰나미 정보</h5>
                     <table class="table table-bordered table-hover detail-table">
                          <tbody>
                             <tr><th scope="row">ID</th><td th:text="${tsunami.id ?: '-'}"></td></tr>
                             <tr><th scope="row">국가</th><td th:text="${tsunami.country ?: '-'}"></td></tr>
                             <tr><th scope="row">위치</th><td th:text="${tsunami.location ?: '-'}"></td></tr>
                             <tr><th scope="row">발생일</th><td th:text="${tsunami.year + '/' + tsunami.month + '/' + tsunami.day}"></td></tr>
                             <tr><th scope="row">최대 수위</th><td><span th:text="${tsunami.maximumWaterHeight != null ? #numbers.formatDecimal(tsunami.maximumWaterHeight, 1, 2) : '-'}"></span> <span th:if="${tsunami.maximumWaterHeight != null}">m</span></td></tr>
                             <tr><th scope="row">Runups 수</th><td th:text="${tsunami.numberOfRunup ?: '-'}"></td></tr>
                             <tr><th scope="row">유효성 코드</th><td th:text="${tsunami.tsunamiEventValidity ?: '-'}"></td></tr>
                             <tr><th scope="row">원인 코드</th><td th:text="${tsunami.tsunamiCauseCode ?: '-'}"></td></tr>
                              <tr><th scope="row">위도</th><td th:text="${tsunami.latitude ?: '-'}"></td></tr>
                             <tr><th scope="row">경도</th><td th:text="${tsunami.longitude ?: '-'}"></td></tr>
                             <!-- 다른 필요한 쓰나미 정보 필드 추가 -->
                         </tbody>
                     </table>
                 </div>
            </div>
        </div>
        
        <!-- 버튼 섹션 -->
        <div class="mt-4 text-center">
            <button type="button" class="btn btn-outline-secondary" onclick="window.close();">
                 <i class="fas fa-times me-1"></i> 창 닫기
            </button>
        </div>
    </div>
    
    <!-- 필수 스크립트 (Bootstrap 등) -->
    <th:block th:replace="fragments/common :: scripts"></th:block>
</body>
</html> 